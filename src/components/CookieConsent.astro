---
const currentLang = Astro.url.pathname.startsWith('/en') ? 'en' : 'it';

const config = {
    palette: {
        popup: { background: "#1f2937" },
        button: { background: "#2563eb" }
    },
    position: "bottom-right",
    layout: "box",
    type: 'opt-in',
    content: currentLang === 'it' ? {
        message: "Questo sito utilizza i cookie per garantire la migliore esperienza di navigazione.",
        allow: "Accetta",
        deny: "Rifiuta",
        link: "Scopri di pi√π",
        href: "/privacy-policy"
    } : {
        message: "This website uses cookies to ensure you get the best experience.",
        allow: "Accept",
        deny: "Reject",
        link: "Learn more",
        href: "/en/privacy-policy"
    }
};
---

<script define:vars={{ config }}>
    document.addEventListener('DOMContentLoaded', () => {
        if (typeof cookieconsent !== 'undefined' && typeof cookieconsent.initialise === 'function') {
            cookieconsent.initialise(config);
        } else {
            console.error("Funzione 'cookieconsent.initialise' non trovata!");
        }
    });
</script>